/*!
 * @tawaship/pixim.js - v1.4.0
 * 
 * @require pixi.js v5.2.1
 * @require howler.js v2.1.3 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var Pixim=function(t,i,e){"use strict";window.console.log("%c pixim.js%cv1.4.0 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v2.1.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var r=function(){this._events={}},n={eventNames:{configurable:!0}};n.eventNames.get=function(){return Object.keys(this._events)},r.prototype._on=function(t,i,e){if(!t||!i)return this;for(var r=this._events[t]=this._events[t]||[],n=0;n<r.length;n++)if(r[n].func===i)return this;return r.push({func:i,once:e}),this},r.prototype.on=function(t,i){return this._on(t,i,!1)},r.prototype.once=function(t,i){return this._on(t,i,!0)},r.prototype.off=function(t,i){if(!t||!i)return this;for(var e=this._events[t]||[],r=0;r<e.length;r++)if(e[r].func===i)return e.splice(r,1),this;return this},r.prototype.emit=function(t){for(var i=[],e=arguments.length-1;e-- >0;)i[e]=arguments[e+1];if(!t)return this;for(var r=this._events[t]||[],n=[],o=r.length-1;o>=0;o--){var a=r[o];a.once&&r.splice(o,1),n.push(a)}for(var s=n.length-1;s>=0;s--)n[s].func.apply(this,i);return this},r.prototype.cemit=function(t,i){for(var e=[],r=arguments.length-2;r-- >0;)e[r]=arguments[r+2];if(!t||null==i)return this;for(var n=this._events[t]||[],o=[],a=n.length-1;a>=0;a--){var s=n[a];s.once&&n.splice(a,1),o.push(s)}for(var p=o.length-1;p>=0;p--)o[p].func.apply(i,e);return this},r.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this},Object.defineProperties(r.prototype,n);var o=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(r),a=function(t){function i(i){t.call(this),this._piximData={context:i,enabled:!0}}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var e={enabled:{configurable:!0}};return e.enabled.get=function(){return this._piximData.enabled},e.enabled.set=function(t){this._piximData.enabled=t},i.prototype.update=function(t){if(this._piximData.enabled)for(var i=this.eventNames,e=this._piximData.context,r=0;r<i.length;r++)this.cemit(i[r],e,t)},i.prototype.destroy=function(){this.clear()},Object.defineProperties(i.prototype,e),i}(o),s=function(t){function i(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];t.call(this),this._piximData={task:new a(this),taskEnabledChildren:!0}}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var e={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return e.taskEnabled.get=function(){return this._piximData.task.enabled},e.taskEnabled.set=function(t){this._piximData.task.enabled=t},e.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},e.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},e.task.get=function(){return this._piximData.task},i.prototype.destroy=function(){t.prototype.destroy.call(this),this._piximData.task.destroy()},Object.defineProperties(i.prototype,e),i}(i.Container),p={};var h=function(t){function e(e,r){var n=this;void 0===e&&(e={}),void 0===r&&(r={}),t.call(this);var o=new i.Application(e);o.stop();var a=o.stage,p=o.view;p.style.position="absolute",r.container?r.container.appendChild(p):p.parentNode||document.body.appendChild(p);r.autoAdjust;if(this._piximData={isRun:!1,app:o,stage:a,view:p,layers:{},options:r},this._piximData.app.ticker.add((function(t){!function t(e,r){if(!(e instanceof s)||(e.task.update(r),e.taskEnabledChildren))for(var n=0;n<e.children.length;n++){var o=e.children[n];o instanceof i.Container&&t(o,r)}}(a,{delta:t})})),r.autoAdjust){var h=function(){n.fullScreen({x:0,y:0,width:window.innerWidth,height:window.innerHeight})};window.addEventListener("resize",h),h()}else this.fullScreen({x:0,y:0,width:p.width,height:p.height})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0}};return r.app.get=function(){return this._piximData.app},r.stage.get=function(){return this._piximData.stage},r.view.get=function(){return this._piximData.view},e.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},e.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.stage.addChild(new i.Container)),this},e.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},e.prototype.attachAsync=function(t,i){var e=this;return void 0===i&&(i="anonymous"),t.buildAsync().then((function(r){return e.addLayer(i),p[t.contentID]=r,e._piximData.layers[i].addChild(r),r}))},e.prototype.detach=function(t){var i=p[t.contentID];return i?(this._destroyRoot(i),delete p[t.contentID],this):this},e.prototype.play=function(){return this._piximData.isRun||(this._piximData.app.start(),this._piximData.isRun=!0),this},e.prototype.stop=function(){if(!this._piximData.isRun)return this;this._piximData.app.stop(),this._piximData.isRun=!1;this._piximData.app.stage;var t=this._piximData.layers;for(var i in t)t[i].removeChildren();var e=[];for(var r in p)this._destroyRoot(p[r]),e.push(r);for(var n=0;n<e.length;n++)delete p[e[n]];return this._piximData.app.ticker.update(),this},e.prototype._destroyRoot=function(t){t.parent&&t.parent.removeChild(t),t.destroy()},e.prototype.pause=function(t){return this._piximData.isRun?(t?this._piximData.app.stop():this._piximData.app.start(),this):this},e.prototype.fullScreen=function(t){void 0===t&&(t={x:0,y:0,width:window.innerWidth,height:window.innerHeight});var i=this._piximData.view;return t.width/t.height>i.width/i.height?this.adjustHeight(t.height).toCenter(t).toTop(t):this.adjustWidth(t.width).toMiddle(t).toLeft(t)},e.prototype.adjustWidth=function(t){var i=this._piximData.view,e=t/i.width*i.height;return i.style.width=t+"px",i.style.height=e+"px",this},e.prototype.adjustHeight=function(t){var i=this._piximData.view,e=t/i.height*i.width;return i.style.height=t+"px",i.style.width=e+"px",this},e.prototype.toLeft=function(t){return this._piximData.view.style.left=t.x+"px",this},e.prototype.toCenter=function(t){return this._piximData.view.style.left=(t.width-this._getViewRect().width)/2+t.x+"px",this},e.prototype.toRight=function(t){return this._piximData.view.style.left=t.width-this._getViewRect().width+t.x+"px",this},e.prototype.toTop=function(t){return this._piximData.view.style.top=t.y+"px",this},e.prototype.toMiddle=function(t){return this._piximData.view.style.top=(t.height-this._getViewRect().height)/2+t.y+"px",this},e.prototype.toBottom=function(t){return this._piximData.view.style.top=t.height-this._getViewRect().height+t.y+"px",this},e.prototype._getViewRect=function(){var t=this._piximData.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(e.prototype,r),e}(o),u=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},c={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};c.width.get=function(){return this._piximData.width},c.height.get=function(){return this._piximData.height},c.lib.get=function(){return this._piximData.lib},c.resources.get=function(){return this._piximData.resources},c.vars.get=function(){return this._piximData.vars},Object.defineProperties(u.prototype,c);var d={},f=function(){this._manifests={}};f.prototype.add=function(t,i){void 0===i&&(i={});var e=i.unrequired||!1;for(var r in t)this._manifests[r]={url:t[r],unrequired:e}},f.prototype.getAsync=function(t){var i=this._manifests,e={},r={},n=d;for(var o in i){var a=i[o],s=this._resolvePath(a.url,t),p=s.replace(/\?.*/,"");n[p]?e[o]=n[p]:r[o]={url:s,name:p,unrequired:a.unrequired}}return 0===Object.keys(r).length?Promise.resolve(e):this._loadAsync(r).then((function(t){for(var i in t)e[i]=t[i].resource,t[i].error||(n[r[i].name]=t[i].resource);return e}))},f.prototype._loadAsync=function(t){return Promise.resolve({})},f.prototype._resolvePath=function(t,e){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:i.utils.url.resolve(e,t)};var l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return new Promise((function(e,r){var n=new i.Loader;for(var o in t)n.add(o,t[o].url,{crossOrigin:!0});var a={};n.load((function(i,n){var o,s;for(var p in n){var h=n[p];if(!h)return void r((o={},o[p]=t[p].url,o));if(h.error&&!t[p].unrequired)return void r((s={},s[p]=t[p].url,s));a[p]={resource:h.texture,error:!!h.error}}e(a)}))}))},e}(f),y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return new Promise((function(e,r){var n=new i.Loader;for(var o in t)n.add(o,t[o].url,{crossOrigin:!0});var a={};n.load((function(i,n){var o,s;for(var p in n)if(t[p]){var h=n[p];if(!h)return void r((o={},o[p]=t[p].url,o));var u=h.textures||{};h.error;if(h.error&&!t[p].unrequired)return void r((s={},s[p]=t[p].url,s));a[p]={resource:u,error:!!h.error}}e(a)}))}))},e}(f),v=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t){return new Promise((function(i,r){var n,o={};function a(t,e,r){o[t]={resource:e,error:r},++p<s||i(o)}var s=0,p=0;for(var h in t){if(!e.Howl)return console.warn('You need "howler.js" to load sound asset.'),void r((n={},n[h]=t[h].url,n));++s}var u=function(i){var n=c,o=new e.Howl({src:t[n].url,onload:function(){a(n,o,!1)},onloaderror:function(){var i;t[n].unrequired?a(n,o,!0):r(((i={})[n]=t[n].url,i))}})};for(var c in t)u()}))},i}(f),_={},m=0;function x(){return{images:new l,spritesheets:new y,sounds:new v}}var g=function t(i,e){void 0===i&&(i={}),void 0===e&&(e=t._piximData);var r=(i.basepath||"").replace(/([^/])$/,"$1/");this._piximData={contentID:(++m).toString(),basepath:r,$:new u({width:e.config.width,height:e.config.height,lib:e.lib,resources:{},vars:{}}),manifests:e.manifests,additionalManifests:x(),preloadPromise:null,postloadPromise:null}},D={contentID:{configurable:!0}};return g.create=function(t){if(void 0===t&&(t=""),t&&t in _)throw new Error("Content key '"+t+"' has already exists.");var i=function(t){function i(e){void 0===e&&(e={}),t.call(this,e,i._piximData)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(g);return i._piximData={config:{width:450,height:800},manifests:x(),lib:{}},t?_[t]=i:i},g.get=function(t){return _[t]},g.remove=function(t){delete _[t]},g.defineManifests=function(t,i,e){return void 0===e&&(e={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(i,e),this):this},g.defineImages=function(t,i){return void 0===i&&(i={}),this.defineManifests("images",t,i)},g.defineSpritesheets=function(t,i){return void 0===i&&(i={}),this.defineManifests("spritesheets",t,i)},g.defineSounds=function(t,i){return void 0===i&&(i={}),this.defineManifests("sounds",t,i)},g.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},g.defineLibraries=function(t){for(var i in t)this._piximData.lib[i]=t[i];return this},D.contentID.get=function(){return this._piximData.contentID},g.prototype.addManifests=function(t,i,e){return void 0===e&&(e={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(i,e),this):this},g.prototype.addImages=function(t,i){return void 0===i&&(i={}),this.addManifests("images",t,i)},g.prototype.addSpritesheets=function(t,i){return void 0===i&&(i={}),this.addManifests("spritesheets",t,i)},g.prototype.addSounds=function(t,i){return void 0===i&&(i={}),this.addManifests("sounds",t,i)},g.prototype.addVars=function(t){for(var i in t)this._piximData.$.vars[i]=t[i];return this},g.prototype.defineVars=function(t){return this.addVars(t)},g.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},g.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},g.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(i){throw t._piximData.preloadPromise=null,i}))},g.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).then((function(){t._piximData.postloadPromise=null})).catch((function(i){throw t._piximData.postloadPromise=null,i}))},g.prototype._loadAssetAsync=function(t){var i=this._piximData.basepath,e=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var r=[],n=[];for(var o in t){var a=o;n.push(a),r.push(t[a].getAsync(i))}return Promise.all(r).then((function(t){for(var i=0;i<t.length;i++)for(var r in e[n[i]]=e[n[i]]||{},t[i])e[n[i]][r]=t[i][r]})).catch((function(t){for(var i in t)console.error("Asset '"+i+": "+t[i]+"' cannot load.");throw t}))},Object.defineProperties(g.prototype,D),t.Application=h,t.Container=s,t.Content=g,t.Emitter=o,t}({},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});