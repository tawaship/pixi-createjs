/*!
 * @tawaship/pixim.js - v1.6.0
 * 
 * @require pixi.js v5.2.1
 * @require howler.js v2.2.0 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,e,i){"use strict";window.console.log("%c pixim.js%cv1.6.0 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v3.0.0
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var n,r=function(){this._events={}},o={eventNames:{configurable:!0}};o.eventNames.get=function(){return Object.keys(this._events)},r.prototype._on=function(t,e,i){if(!t||!e)return this;for(var n=this._events[t]=this._events[t]||[],r=0;r<n.length;r++)if(n[r].func===e)return this;return n.push({func:e,once:i}),this},r.prototype.on=function(t,e){return this._on(t,e,!1)},r.prototype.once=function(t,e){return this._on(t,e,!0)},r.prototype.off=function(t,e){if(!t||!e)return this;for(var i=this._events[t]||[],n=0;n<i.length;n++)if(i[n].func===e)return i.splice(n,1),this;return this},r.prototype.emit=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!t)return this;for(var n=this._events[t]||[],r=[],o=n.length-1;o>=0;o--){var a=n[o];a.once&&n.splice(o,1),r.push(a)}for(var s=r.length-1;s>=0;s--)r[s].func.apply(this,e);return this},r.prototype.cemit=function(t,e){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];if(!t||null==e)return this;for(var r=this._events[t]||[],o=[],a=r.length-1;a>=0;a--){var s=r[a];s.once&&r.splice(a,1),o.push(s)}for(var p=o.length-1;p>=0;p--)o[p].func.apply(e,i);return this},r.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this},Object.defineProperties(r.prototype,o),function(t){var e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r);t.Emitter=e}(n||(n={}));var a,s=n.Emitter;!function(t){var e=function(t){function e(e){t.call(this),this._piximData={context:e,enabled:!0}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={enabled:{configurable:!0}};return i.enabled.get=function(){return this._piximData.enabled},i.enabled.set=function(t){this._piximData.enabled=t},e.prototype.update=function(t){if(this._piximData.enabled)for(var e=this.eventNames,i=this._piximData.context,n=0;n<e.length;n++)this.cemit(e[n],i,t)},e.prototype.destroy=function(){this.clear()},Object.defineProperties(e.prototype,i),e}(s);t.Task=e}(a||(a={}));var p,u=a.Task;!function(t){var i=function(t){function e(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.call(this),this._piximData={task:new u(this),taskEnabledChildren:!0}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return i.taskEnabled.get=function(){return this._piximData.task.enabled},i.taskEnabled.set=function(t){this._piximData.task.enabled=t},i.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},i.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},i.task.get=function(){return this._piximData.task},e.prototype.destroy=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.prototype.destroy.apply(this,e),this._piximData.task.destroy()},Object.defineProperties(e.prototype,i),e}(e.Container);t.Container=i}(p||(p={}));var h,c=p.Container;!function(t){var i={};var n=function(t){function n(i,n){var r=this;void 0===i&&(i={}),void 0===n&&(n={}),t.call(this);var o=new e.Application(i);o.stop();var a=o.stage,s=o.view;s.style.position="absolute",n.container?n.container.appendChild(s):s.parentNode||document.body.appendChild(s);n.autoAdjust;if(this._piximData={isRun:!1,app:o,stage:a,view:s,layers:{},options:n},this._piximData.app.ticker.add((function(t){!function t(i,n){if(!(i instanceof c)||(i.task.update(n),i.taskEnabledChildren))for(var r=0;r<i.children.length;r++){var o=i.children[r];o instanceof e.Container&&t(o,n)}}(a,{delta:t})})),n.autoAdjust){var p=function(){r.fullScreen({x:0,y:0,width:window.innerWidth,height:window.innerHeight})};window.addEventListener("resize",p),p()}else this.fullScreen({x:0,y:0,width:s.width,height:s.height})}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0}};return r.app.get=function(){return this._piximData.app},r.stage.get=function(){return this._piximData.stage},r.view.get=function(){return this._piximData.view},n.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},n.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.stage.addChild(new e.Container)),this},n.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},n.prototype.attachAsync=function(t,e){var n=this;return void 0===e&&(e="anonymous"),t.buildAsync().then((function(r){return n.addLayer(e),i[t.contentID]=r,n._piximData.layers[e].addChild(r),r}))},n.prototype.detach=function(t){var e=i[t.contentID];return e?(this._destroyRoot(e),delete i[t.contentID],this):this},n.prototype.play=function(){return this._piximData.isRun||(this._piximData.app.start(),this._piximData.isRun=!0),this},n.prototype.stop=function(){if(!this._piximData.isRun)return this;this._piximData.app.stop(),this._piximData.isRun=!1;this._piximData.app.stage;var t=this._piximData.layers;for(var e in t)t[e].removeChildren();var n=[];for(var r in i)this._destroyRoot(i[r]),n.push(r);for(var o=0;o<n.length;o++)delete i[n[o]];return this._piximData.app.ticker.update(),this},n.prototype._destroyRoot=function(t){t.parent&&t.parent.removeChild(t),t.destroy()},n.prototype.pause=function(t){return this._piximData.isRun?(t?this._piximData.app.stop():this._piximData.app.start(),this):this},n.prototype.fullScreen=function(t){void 0===t&&(t={x:0,y:0,width:window.innerWidth,height:window.innerHeight});var e=this._piximData.view;return t.width/t.height>e.width/e.height?this.adjustHeight(t.height).toCenter(t).toTop(t):this.adjustWidth(t.width).toMiddle(t).toLeft(t)},n.prototype.adjustWidth=function(t){var e=this._piximData.view,i=t/e.width*e.height;return e.style.width=t+"px",e.style.height=i+"px",this},n.prototype.adjustHeight=function(t){var e=this._piximData.view,i=t/e.height*e.width;return e.style.height=t+"px",e.style.width=i+"px",this},n.prototype.toLeft=function(t){return this._piximData.view.style.left=t.x+"px",this},n.prototype.toCenter=function(t){return this._piximData.view.style.left=(t.width-this._getViewRect().width)/2+t.x+"px",this},n.prototype.toRight=function(t){return this._piximData.view.style.left=t.width-this._getViewRect().width+t.x+"px",this},n.prototype.toTop=function(t){return this._piximData.view.style.top=t.y+"px",this},n.prototype.toMiddle=function(t){return this._piximData.view.style.top=(t.height-this._getViewRect().height)/2+t.y+"px",this},n.prototype.toBottom=function(t){return this._piximData.view.style.top=t.height-this._getViewRect().height+t.y+"px",this},n.prototype._getViewRect=function(){var t=this._piximData.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(n.prototype,r),n}(s);t.Application=n}(h||(h={}));var f,d=h.Application;!function(t){var i={},n=function(){this._manifests={}};n.prototype.add=function(t,e){void 0===e&&(e={});var i=e.unrequired||!1;for(var n in t)this._manifests[n]={url:t[n],unrequired:i}},n.prototype.getAsync=function(t){var e=this._manifests,n={},r={},o=i;for(var a in e){var s=e[a],p=this._resolvePath(s.url,t),u=p.replace(/\?.*/,"");o[u]?n[a]=o[u]:r[a]={url:p,name:u,unrequired:s.unrequired}}return 0===Object.keys(r).length?Promise.resolve(n):this._loadAsync(r).then((function(t){for(var e in t)n[e]=t[e].resource,t[e].error||(o[r[e].name]=t[e].resource);return n}))},n.prototype._loadAsync=function(t){return Promise.resolve({})},n.prototype._resolvePath=function(t,i){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:e.utils.url.resolve(i,t)},t.ContentManifestBase=n}(f||(f={}));var l,v=f.ContentManifestBase;!function(t){var i=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t){return new Promise((function(i,n){var r=new e.Loader;for(var o in t)r.add(o,t[o].url,{crossOrigin:!0});var a={};r.load((function(e,r){var o,s;for(var p in r){var u=r[p];if(!u)return void n((o={},o[p]=t[p].url,o));if(u.error&&!t[p].unrequired)return void n((s={},s[p]=t[p].url,s));a[p]={resource:u.texture,error:!!u.error}}i(a)}))}))},i}(v);t.ContentImageManifest=i}(l||(l={}));var y,_=l.ContentImageManifest;!function(t){var i=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t){return new Promise((function(i,n){var r=new e.Loader;for(var o in t)r.add(o,t[o].url,{crossOrigin:!0});var a={};r.load((function(e,r){var o,s;for(var p in r)if(t[p]){var u=r[p];if(!u)return void n((o={},o[p]=t[p].url,o));var h=u.textures||{};u.error;if(u.error&&!t[p].unrequired)return void n((s={},s[p]=t[p].url,s));a[p]={resource:h,error:!!u.error}}i(a)}))}))},i}(v);t.ContentSpritesheetManifest=i}(y||(y={}));var m,x=y.ContentSpritesheetManifest;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return new Promise((function(e,n){var r,o={};function a(t,i,n){o[t]={resource:i,error:n},++p<s||e(o)}var s=0,p=0;for(var u in t){if(!i.Howl)return console.warn('You need "howler.js" to load sound asset.'),void n((r={},r[u]=t[u].url,r));++s}var h=function(e){var r=c,o=new i.Howl({src:t[r].url,onload:function(){a(r,o,!1)},onloaderror:function(){var e;t[r].unrequired?a(r,o,!0):n(((e={})[r]=t[r].url,e))}})};for(var c in t)h()}))},e}(v);t.ContentSoundManifest=e}(m||(m={}));var g,D=m.ContentSoundManifest;!function(t){var e=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},i={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};i.width.get=function(){return this._piximData.width},i.height.get=function(){return this._piximData.height},i.lib.get=function(){return this._piximData.lib},i.resources.get=function(){return this._piximData.resources},i.vars.get=function(){return this._piximData.vars},Object.defineProperties(e.prototype,i),t.ContentDeliver=e}(g||(g={}));var w,b=g.ContentDeliver;!function(t){var e={},i=0;function n(){return{images:new _,spritesheets:new x,sounds:new D}}var r=function t(e,r){void 0===e&&(e={}),void 0===r&&(r=t._piximData);var o=(e.basepath||"").replace(/([^/])$/,"$1/");this._piximData={contentID:(++i).toString(),basepath:o,$:new b({width:r.config.width,height:r.config.height,lib:r.lib,resources:{},vars:{}}),manifests:r.manifests,additionalManifests:n(),preloadPromise:null,postloadPromise:null}},o={contentID:{configurable:!0}};r.create=function(t){if(void 0===t&&(t=""),t&&t in e)throw new Error("Content key '"+t+"' has already exists.");var i=function(t){function e(i){void 0===i&&(i={}),t.call(this,i,e._piximData)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r);return i._piximData={config:{width:450,height:800},manifests:n(),lib:{}},t?e[t]=i:i},r.get=function(t){return e[t]},r.remove=function(t){delete e[t]},r.defineManifests=function(t,e,i){return void 0===i&&(i={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(e,i),this):this},r.defineImages=function(t,e){return void 0===e&&(e={}),this.defineManifests("images",t,e)},r.defineSpritesheets=function(t,e){return void 0===e&&(e={}),this.defineManifests("spritesheets",t,e)},r.defineSounds=function(t,e){return void 0===e&&(e={}),this.defineManifests("sounds",t,e)},r.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},r.defineLibraries=function(t){for(var e in t)this._piximData.lib[e]=t[e];return this},o.contentID.get=function(){return this._piximData.contentID},r.prototype.addManifests=function(t,e,i){return void 0===i&&(i={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(e,i),this):this},r.prototype.addImages=function(t,e){return void 0===e&&(e={}),this.addManifests("images",t,e)},r.prototype.addSpritesheets=function(t,e){return void 0===e&&(e={}),this.addManifests("spritesheets",t,e)},r.prototype.addSounds=function(t,e){return void 0===e&&(e={}),this.addManifests("sounds",t,e)},r.prototype.addVars=function(t){for(var e in t)this._piximData.$.vars[e]=t[e];return this},r.prototype.defineVars=function(t){return this.addVars(t)},r.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},r.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},r.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(e){throw t._piximData.preloadPromise=null,e}))},r.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).then((function(){t._piximData.postloadPromise=null})).catch((function(e){throw t._piximData.postloadPromise=null,e}))},r.prototype._loadAssetAsync=function(t){var e=this._piximData.basepath,i=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var n=[],r=[];for(var o in t){var a=o;r.push(a),n.push(t[a].getAsync(e))}return Promise.all(n).then((function(t){for(var e=0;e<t.length;e++)for(var n in i[r[e]]=i[r[e]]||{},t[e])i[r[e]][n]=t[e][n]})).catch((function(t){for(var e in t)console.error("Asset '"+e+": "+t[e]+"' cannot load.");throw t}))},Object.defineProperties(r.prototype,o),t.Content=r}(w||(w={}));var C=w.Content;t.Application=d,t.Container=c,t.Content=C,t.ContentImageManifest=_,t.ContentManifestBase=v,t.ContentSoundManifest=D,t.ContentSpritesheetManifest=x,t.Emitter=s,t.Task=u}(this.Pixim=this.Pixim||{},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});