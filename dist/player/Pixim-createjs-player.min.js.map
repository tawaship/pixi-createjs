{"version":3,"file":"Pixim-createjs-player.min.js","sources":["../../src/player/common/core.js","../../src/player/common/global.ts","../../src/player/pixim/Player.ts"],"sourcesContent":["import * as PIXI from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initAsync(basepath, comp) {\r\n\treturn new Promise(function(resolve, reject) {\r\n\t\tconst lib = comp.getLibrary();\r\n\t\t\r\n\t\tif (lib.properties.manifest.length === 0) {\r\n\t\t\tresolve({\r\n\t\t\t\tevt: {},\r\n\t\t\t\tcomp: comp\r\n\t\t\t});\r\n\t\t}\r\n\t\t\n\t\tconst loader = new createjs.LoadQueue(false);\r\n\t\t\r\n\t\tloader.installPlugin(createjs.Sound);\r\n\t\t\n\t\tloader.addEventListener('fileload', function(evt) {\r\n\t\t\thandleFileLoad(evt, comp);\r\n\t\t});\r\n\t\t\n\t\tloader.addEventListener('complete', function(evt) {\r\n\t\t\tresolve({\r\n\t\t\t\tevt: evt,\r\n\t\t\t\tcomp: comp\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tif (basepath) {\r\n\t\t\tbasepath = (basepath + '/').replace(/\\/\\//g, '/');\r\n\t\t\tconst m = lib.properties.manifest;\r\n\t\t\tfor (let i = 0; i < m.length; i++) {\r\n\t\t\t\tm[i].src = basepath + m[i].src;\r\n\t\t\t}\n\t\t}\r\n\t\t\r\n\t\tloader.loadManifest(lib.properties.manifest);\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n\tconst images = comp.getImages();\r\n\tif (evt && (evt.item.type == 'image')) {\r\n\t\timages[evt.item.id] = evt.result;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage, options) {\r\n\toptions = options || {};\r\n\t\r\n\tif (options.useSynchedTimeline) {\r\n\t\tfunction containerDrawFunction() {\r\n\t\t\tconst list = this.children.slice();\r\n\t\t\tfor (let i = 0,l = list.length; i < l; i++) {\r\n\t\t\t\tconst child = list[i];\r\n\t\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\tchild.draw();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t\r\n\t\tfunction imageDrawFunction() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tObject.defineProperties(createjs.MovieClip.prototype, {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: function() {\r\n\t\t\t\t\tthis._updateState();\r\n\t\t\t\t\treturn this._containerDraw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t_containerDraw: {\r\n\t\t\t\tvalue: containerDrawFunction\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tconst imageDescriptors = {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: imageDrawFunction\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tObject.defineProperties(createjs.Sprite.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Graphics.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Shape.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Text.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Bitmap.prototype, imageDescriptors);\r\n\t\t\r\n\t\tstage.update = function(props) {\r\n\t\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\t\tthis.dispatchEvent(\"drawstart\");\n\t\t\tif (this.autoClear) { this.clear(); }\n\t\t\t\n\t\t\tif (this._webGLContext) {\n\t\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.draw();\n\t\t\t}\r\n\t\t\t\n\t\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t}\r\n\t\t\r\n\t\tstage.draw = containerDrawFunction;\r\n\t\t\r\n\t\tstage._updateFunction = stage.update;\r\n\t} else {\r\n\t\tstage._updateFunction = stage.tick;\r\n\t}\r\n\t\r\n\tif (stage._handleTick) {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t\tstage._handleTick();\r\n\t\t};\r\n\t} else {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t};\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst createjsOrigin = {\r\n\tDisplayObject: createjs.DisplayObject,\r\n\tMovieClip: createjs.MovieClip,\r\n\tSprite: createjs.Sprite,\r\n\tContainer: createjs.Container,\r\n\tText: createjs.Text,\r\n\tShape: createjs.Shape,\r\n\tGraphics: createjs.Graphics,\r\n\tButtonHelper: createjs.ButtonHelper\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction overrideCreatejs(self, pixi) {\r\n\tself._originParams = {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregx: 0,\r\n\t\tregy: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null,\r\n\t\tfilters: null\r\n\t};\r\n\t\r\n\tpixi._createjs = self;\r\n\t\r\n\tself._pixiData = {\r\n\t\tinstance: pixi,\r\n\t\tregObj: pixi.anchor || pixi.pivot,\r\n\t\tevents: {}\r\n\t};\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _downInstance;\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = createjsOrigin.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet f = false;\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tf = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new PIXI.filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new PIXI.Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new PIXI.Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t},\r\n\tgetPixi: {\r\n\t\tvalue: function() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t}\r\n};\r\n\r\ncreatejs.MovieClip = function _MovieClip() {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\tcreatejsOrigin.MovieClip.apply(this, arguments);\r\n}\r\n\r\ncreatejs.MovieClip.prototype = Object.defineProperties(Object.create(createjsOrigin.MovieClip.prototype), Object.assign({\r\n\tinitialize: {\r\n\t\tvalue: function() {\r\n\t\t\toverrideCreatejs(this, new PIXI.Container());\r\n\t\t\tthis._pixiData.subInstance = this._pixiData.instance;//.addChild(new PIXI.Container());\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.initialize.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\taddChild: {\r\n\t\tvalue: function(child) {\r\n\t\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.addChild.call(this, child);\r\n\t\t}\r\n\t},\r\n\taddChildAt: {\r\n\t\tvalue: function(child, index) {\r\n\t\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.addChildAt.call(this, child, index);\r\n\t\t}\r\n\t},\r\n\tremoveChild: {\r\n\t\tvalue: function(child) {\r\n\t\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.removeChild.call(this, child);\r\n\t\t}\r\n\t},\r\n\tremoveChildAt: {\r\n\t\tvalue: function(index) {\r\n\t\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.removeChildAt.call(this, index);\r\n\t\t}\r\n\t}\r\n\t,\r\n\tremoveAllChldren: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\treturn createjsOrigin.MovieClip.prototype.removeAllChldren();\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.Sprite = function _Sprite() {\r\n\toverrideCreatejs(this, new PIXI.Sprite());\r\n\tcreatejsOrigin.Sprite.apply(this, arguments);\r\n}\r\n\r\ncreatejs.Sprite.prototype = Object.defineProperties(Object.create(createjsOrigin.Sprite.prototype), Object.assign({\r\n\tinitialize: {\r\n\t\tvalue: function() {\r\n\t\t\toverrideCreatejs(this, new PIXI.Sprite());\r\n\t\t\treturn createjsOrigin.Sprite.prototype.initialize.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tgotoAndStop: {\r\n\t\tvalue: function() {\r\n\t\t\tcreatejsOrigin.Sprite.prototype.gotoAndStop.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\t\tconst baseTexture = PIXI.BaseTexture.from(frame.image);\r\n\t\t\tconst texture = new PIXI.Texture(baseTexture, frame.rect);\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.texture = texture;\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.Shape = function _Shape() {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\tthis._pixiData.masked = [];\r\n\t\r\n\tcreatejsOrigin.Shape.apply(this, arguments);\r\n}\r\n\r\ncreatejs.Shape.prototype = Object.defineProperties(Object.create(createjsOrigin.Shape.prototype), Object.assign({\r\n\tgraphics: {\r\n\t\tget: function() {\r\n\t\t\treturn this._graphics;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.masked.length) {\r\n\t\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\t\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._graphics = value;\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.Graphics = function _Graphics() {\r\n\toverrideCreatejs(this, new PIXI.Graphics());\r\n\tcreatejsOrigin.Graphics.apply(this, arguments);\r\n\t\r\n\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\r\n\tthis._pixiData.strokeFill = 0;\r\n\tthis._pixiData.strokeAlpha = 1;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: PIXI.LINE_JOIN.BUTT,\r\n\t1: PIXI.LINE_JOIN.ROUND,\r\n\t2: PIXI.LINE_JOIN.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: PIXI.LINE_JOIN.MITER,\r\n\t1: PIXI.LINE_JOIN.ROUND,\r\n\t2: PIXI.LINE_JOIN.BEVEL\r\n};\r\n\r\ncreatejs.Graphics.prototype = Object.defineProperties(Object.create(createjsOrigin.Graphics.prototype), Object.assign({\r\n\tmoveTo: {\r\n\t\tvalue: function(x, y) {\r\n\t\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.endHole();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.moveTo.call(this, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\tlineTo: {\r\n\t\tvalue: function(x, y) {\r\n\t\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.lineTo.call(this, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\tarcTo: {\r\n\t\tvalue: function(x1, y1, x2, y2, radius) {\r\n\t\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.arcTo.call(this, x1, y1, x2, y2, radius);\r\n\t\t}\r\n\t},\r\n\t\r\n\tarc: {\r\n\t\tvalue: function(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.arc.call(this, x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t}\r\n\t},\r\n\t\r\n\tquadraticCurveTo: {\r\n\t\tvalue: function(cpx, cpy, x, y) {\r\n\t\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.quadraticCurveTo.call(this, cpx, cpy, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\tbezierCurveTo: {\r\n\t\tvalue: function(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.bezierCurveTo.call(this, cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t}\r\n\t},\r\n\t\r\n\trect: {\r\n\t\tvalue: function(x, y, w, h) {\r\n\t\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.rect.call(this, x, y, w, h);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclosePath: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.instance.closePath();\r\n\t\t\t\r\n\t\t\tconst points = this._pixiData.instance.currentPath.points;\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.closePath.call(this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclear: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.instance.clear();\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.clear.call(this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_parseColor: {\r\n\t\tvalue: function(color) {\r\n\t\t\tconst res = {\r\n\t\t\t\tcolor: 0,\r\n\t\t\t\talpha: 1\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (!color) {\r\n\t\t\t\tres.alpha = 0;\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (color.charAt(0) === '#') {\r\n\t\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolor = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\t\r\n\t\t\tres.color = Number(color[0]) * COLOR_RED + Number(color[1]) * COLOR_GREEN + Number(color[2]);\r\n\t\t\tres.alpha = Number(color[3]);\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\t\r\n\tbeginFill: {\r\n\t\tvalue: function(color) {\r\n\t\t\tconst c = this._parseColor(color);\r\n\t\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.beginFill.call(this, color);\r\n\t\t}\r\n\t},\r\n\t\r\n\tendFill: {\r\n\t\tvalue: function() {\r\n\t\t\tthis._pixiData.instance.endFill();\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.endFill.call(this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetStrokeStyle: {\r\n\t\tvalue: function(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\t\tthis._pixiData.instance.lineStyle({\r\n\t\t\t\twidth: thickness,\r\n\t\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\t\tcap: (caps in LineCap) ? LineCap[caps] : caps,\r\n\t\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : joints,\r\n\t\t\t\tmiterLimit: miterLimit\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.setStrokeStyle.call(this, thickness, caps, joints, miterLimit, ignoreScale);\r\n\t\t}\r\n\t},\r\n\t\r\n\tbeginStroke: {\r\n\t\tvalue: function(color) {\r\n\t\t\tconst c = this._parseColor(color);\r\n\t\t\tthis._pixiData.strokeFill = c.color;\r\n\t\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.beginStroke.call(this, color);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawRoundRect: {\r\n\t\tvalue: function(x, y, w, h, radius) {\r\n\t\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawRoundRect.call(this, x, y, w, h, radius);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawCircle: {\r\n\t\tvalue: function(x, y, radius) {\r\n\t\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawCircle.call(this, x, y, radius);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawEllipse: {\r\n\t\tvalue: function(x, y, w, h) {\r\n\t\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawEllipse.call(this, x, y, w, h);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawPolyStar: {\r\n\t\tvalue: function(x, y, radius, sides, pointSize, angle) {\r\n\t\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.Graphics.prototype.drawPolyStar.call(this, x, y, radius, sides, pointSize, angle);\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\nObject.defineProperties(createjs.Graphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: createjs.Graphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: createjs.Graphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: createjs.Graphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: createjs.Graphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: createjs.Graphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: createjs.Graphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: createjs.Graphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: createjs.Graphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: createjs.Graphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: createjs.Graphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: createjs.Graphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: createjs.Graphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: createjs.Graphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: createjs.Graphics.prototype.drawPolyStar\r\n\t}\r\n});\r\n\r\ncreatejs.Text = function _Text(text, font, color) {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\t\r\n\tthis._originParams = Object.assign(this._originParams, {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: 'left',\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n\t\r\n\tconst _font = this._parseFont(font);\r\n\t\r\n\tthis._pixiData.instance.text = this._pixiData.instance.addChild(new PIXI.Text(text, {\r\n\t\tfontSize: _font.fontSize,\r\n\t\tfontFamily: _font.fontFamily,\r\n\t\tfill: this._parseColor(color),\r\n\t\twordWrap: true\r\n\t}));\r\n\t\r\n\tcreatejsOrigin.Text.apply(this, arguments);\r\n}\r\n\r\ncreatejs.Text.prototype = Object.defineProperties(Object.create(createjsOrigin.Text.prototype), Object.assign({\r\n\ttext: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.text;\r\n\t\t},\r\n\t\tset: function(text) {\r\n\t\t\tthis._pixiData.instance.text.text = text;\r\n\t\t\tthis._align(this.textAlign);\r\n\t\t\t\r\n\t\t\treturn this._originParams.text = text;\r\n\t\t}\r\n\t},\r\n\t_parseFont: {\r\n\t\tvalue: function(font) {\r\n\t\t\tconst p = font.split(' ');\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tfontSize: Number(p.shift().replace('px', '')),\r\n\t\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tfont: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.font;\r\n\t\t},\r\n\t\tset: function(font) {\r\n\t\t\tconst _font = this._parseFont(font);\r\n\t\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\t\r\n\t\t\treturn this._originParams.font = font;\r\n\t\t}\r\n\t},\r\n\t_parseColor: {\r\n\t\tvalue: function(color) {\r\n\t\t\treturn parseInt(color.slice(1), 16);\r\n\t\t}\r\n\t},\r\n\tcolor: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.color;\r\n\t\t},\r\n\t\tset: function(color) {\r\n\t\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\t\r\n\t\t\treturn this._originParams.color = color;\r\n\t\t}\r\n\t},\r\n\t_align: {\r\n\t\tvalue: function(align) {\r\n\t\t\tif (align === 'left') {\r\n\t\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (align === 'center') {\r\n\t\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (align === 'right') {\r\n\t\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ttextAlign: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.textAlign;\r\n\t\t},\r\n\t\tset: function(align) {\r\n\t\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\t\tthis._align(align);\r\n\t\t\t\r\n\t\t\treturn this._originParams.textAlign = align;\r\n\t\t}\r\n\t},\r\n\tlineHeight: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.lineHeight;\r\n\t\t},\r\n\t\tset: function(height) {\r\n\t\t\tthis._pixiData.instance.text.lineHeight = height;\r\n\t\t\t\r\n\t\t\treturn this._originParams.lineHeight = height;\r\n\t\t}\r\n\t},\r\n\tlineWidth: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.lineWidth;\r\n\t\t},\r\n\t\tset: function(width) {\r\n\t\t\tthis._pixiData.instance.text.lineWidthWrap = width;\r\n\t\t\t\r\n\t\t\treturn this._originParams.lineWidth = width;\r\n\t\t}\r\n\t}\r\n}, appendixDescriptor));\r\n\r\ncreatejs.ButtonHelper = function _ButtonHelper() {\r\n\toverrideCreatejs(this, new PIXI.Container());\r\n\t\r\n\tcreatejsOrigin.ButtonHelper.apply(this, arguments);\r\n\t\r\n\tconst createjs = arguments[0];\r\n\tconst pixi = createjs._pixiData.instance;\r\n\t\r\n\tconst baseFrame = arguments[1];\r\n\tconst overFrame = arguments[2];\r\n\tconst downFrame = arguments[3];\r\n\tconst hit = arguments[5];\r\n\tconst hitFrame = arguments[6];\r\n\t\r\n\thit.gotoAndStop(hitFrame);\r\n\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\thitPixi.alpha = 0.00001\r\n\t\r\n\tlet isOver = false;\r\n\tlet isDown = false;\r\n\t\r\n\thitPixi.on('pointerover', function() {\r\n\t\tisOver = true;\r\n\t\tif (isDown) {\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.on('pointerout', function() {\r\n\t\tisOver = false;\r\n\t\t\r\n\t\tif (isDown) {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.on('pointerdown', function() {\r\n\t\tisDown = true;\r\n\t\tcreatejs.gotoAndStop(downFrame);\r\n\t});\r\n\t\r\n\thitPixi.on('pointerup', function() {\r\n\t\tisDown = false;\r\n\t\tif (isOver) {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.on('pointerupoutside', function() {\r\n\t\tisDown = false;\r\n\t\tif (isOver) {\r\n\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t} else {\r\n\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t}\r\n\t});\r\n\t\r\n\thitPixi.interactive = true;\r\n\thitPixi.cursor = 'pointer';\r\n}\r\n\r\ncreatejs.ButtonHelper.prototype = Object.create(createjsOrigin.ButtonHelper.prototype);\r\n\r\n/*\r\nconst originTo = createjs.Tween.prototype.to;\r\ncreatejs.Tween.prototype.to = function() {\r\n\tconst obj = arguments[0];\r\n\t\r\n\tif ('rotation' in obj) {\r\n\t\tconst prevRotation = this._prevRotation || 0;\r\n\t\t\r\n\t\tif (Math.abs(obj.rotation - prevRotation) >= 360) {\r\n\t\t\tif ('skewX' in obj) {\r\n\t\t\t\tobj.skewX += 360;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ('skewY' in obj) {\r\n\t\t\t\tobj.skewY += 360;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._prevRotation = obj.rotation;\r\n\t}\r\n\t\r\n\treturn originTo.apply(this, arguments);\r\n};\r\n*/","/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nfunction playSound(id: string, loop: Boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","import { initAsync, initStage } from '../common/core';\r\nimport * as _Pixim from '@tawaship/pixim.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace Pixim {\r\n\texport namespace createjs {\r\n\t\t/**\r\n\t\t * @property useSynchedTimeline Whether the movie clip plays when placed as a \"graphic\".\r\n\t\t */\r\n\t\texport type TCreatejsPlayerOption = {\r\n\t\t\tuseSynchedTimeline?: boolean\r\n\t\t};\r\n\t\t\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player extends _Pixim.Application {\r\n\t\t\tprivate _composition: any;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\tprivate _handleTick: Function;\r\n\t\t\t\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}, piximOptions: _Pixim.TApplicationOption = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tsuper(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}), piximOptions);\r\n\t\t\t\t\r\n\t\t\t\tthis._composition = comp;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleStop;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._tick.bind(this));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\tthis._handleTick = this._handlePlay;\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\tthis._handleTick = this._handleStop;\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _tick() {\r\n\t\t\t\tthis._handleTick();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handlePlay() {\r\n\t\t\t\tthis._stage._tickFunction();\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleStop() {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinitAsync(options: TCreatejsPlayerOption = {}) {\r\n\t\t\t\treturn initAsync(this._basepath, this._composition)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tconst evt = data.evt;\r\n\t\t\t\t\t\tconst comp = data.comp;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst lib = comp.getLibrary();\n\t\t\t\t\t\tconst ss = comp.getSpriteSheet();\n\t\t\t\t\t\tconst queue = evt.target;\n\t\t\t\t\t\tconst ssMetadata = lib.ssMetadata;\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (let i = 0; i < ssMetadata.length; i++) {\n\t\t\t\t\t\t\tss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n\t\t\t\t\t\t\t\timages: [\r\n\t\t\t\t\t\t\t\t\tqueue.getResult(ssMetadata[i].name)\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\tframes: ssMetadata[i].frames\r\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tinitStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst Content = _Pixim.Content.create();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tContent.defineLibraries({\r\n\t\t\t\t\t\t\troot: class Root extends _Pixim.Container {\r\n\t\t\t\t\t\t\t\tconstructor($: any) {\r\n\t\t\t\t\t\t\t\t\tsuper();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.addChild($.vars.root);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst content = new Content();\r\n\t\t\t\t\t\tcontent.addVars({\r\n\t\t\t\t\t\t\troot: exportRoot.getPixi()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.app.render();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn this.attachAsync(content);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TCreatejsPlayerOption = Pixim.createjs.TCreatejsPlayerOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = Pixim.createjs.Player;"],"names":["initAsync","basepath","comp","Promise","resolve","reject","const","lib","getLibrary","properties","manifest","length","evt","loader","createjs","LoadQueue","installPlugin","Sound","addEventListener","images","getImages","item","type","id","result","handleFileLoad","replace","m","i","src","loadManifest","initStage","stage","options","useSynchedTimeline","containerDrawFunction","list","this","children","slice","l","child","isVisible","draw","Object","defineProperties","MovieClip","prototype","value","_updateState","_containerDraw","imageDescriptors","Sprite","Graphics","Shape","Text","Bitmap","update","props","tickOnUpdate","tick","dispatchEvent","autoClear","clear","_webGLContext","_batchDraw","_autoPurge","_drawID","purgeTextures","_updateFunction","_handleTick","_tickFunction","e","window","playSound","loop","play","interrupt","INTERRUPT_EARLY","createjsOrigin","DisplayObject","Container","ButtonHelper","overrideCreatejs","self","pixi","_originParams","x","y","scaleX","scaleY","regx","regy","skewX","skewY","rotation","visible","alpha","_off","mask","filters","_createjs","_pixiData","instance","regObj","anchor","pivot","events","let","_isDown","EventMap","mousedown","types","factory","cb","currentTarget","target","ev","data","rawX","global","rawY","rollover","rollout","pressmove","pressup","DEG_TO_RAD","Math","PI","appendixDescriptor","get","set","scale","skew","regX","regY","renderable","Function","func","t","push","origin","on","interactive","apply","arguments","removeEventListener","j","off","splice","res","listeners","_listeners","removeAllEventListeners","removeAllListeners","_pixi","masked","once","parent","addChild","subInstance","f","ColorMatrixFilter","PIXI.filters","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","PIXI.Container","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","getPixi","create","assign","initialize","call","addChildAt","index","removeChild","removeChildAt","removeAllChldren","PIXI.Sprite","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","PIXI.BaseTexture","from","image","texture","PIXI.Texture","rect","graphics","_graphics","PIXI.Graphics","beginFill","strokeFill","strokeAlpha","Pixim","LineCap","0","PIXI.LINE_JOIN","BUTT","1","ROUND","2","SQUARE","LineJoin","MITER","BEVEL","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTo","x1","y1","x2","y2","radius","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","currentPath","points","_parseColor","color","charAt","parseInt","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineStyle","width","cap","join","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","ss","s","dr","rr","dc","de","dp","text","font","textAlign","lineHeight","lineWidth","_font","_parseFont","PIXI.Text","fontSize","fontFamily","fill","wordWrap","_align","p","shift","style","align","height","lineWidthWrap","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","Player","rootName","pixiOptions","piximOptions","AdobeAn","getComposition","Error","root","prop","super","backgroundColor","_composition","_rootClass","_basepath","Ticker","framerate","fps","_handleStop","_tick","bind","_handlePlay","stop","_stage","app","render","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","exportRoot","Stage","compositionLoaded","Content","_Pixim.Content","defineLibraries","$","vars","content","addVars","attachAsync","_Pixim.Application"],"mappings":"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"}